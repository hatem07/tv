<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>TV Channels Player</title><style>body{font-family:Arial,sans-serif;background-color:#222;margin:0;padding:0;color:#fff}.container{max-width:800px;padding:20px;margin:0 auto}h1{text-align:center;color:#fff;margin-bottom:30px}.video-container{position:relative;margin-bottom:20px}.video-player{width:100%;height:auto;min-height:300px;background-color:#000;border-radius:5px;box-shadow:0 0 20px rgba(0,0,0,.5)}embed,video{width:100%;height:auto;border-radius:5px}.status-overlay{position:absolute;top:10px;left:10px;background-color:rgba(0,0,0,.7);padding:5px 10px;border-radius:4px;font-size:14px;z-index:10}.error-message{color:#f44;text-align:center;padding:10px;background-color:rgba(0,0,0,.7);border-radius:5px;margin-top:5px;display:none}.channel-list-container{background-color:#333;border-radius:5px;padding:10px;box-shadow:0 0 10px rgba(0,0,0,.3)}#channel-list{list-style-type:none;padding:0;margin:0;display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px}#channel-list li{padding:15px;background-color:#444;border-radius:5px;cursor:pointer;text-align:center;transition:all .2s}#channel-list li:focus,#channel-list li:hover{background-color:#555;transform:scale(1.03)}#channel-list li.active{background-color:#1976d2;transform:scale(1.05);box-shadow:0 0 10px rgba(25,118,210,.5)}.remote-hint{text-align:center;margin-top:20px;font-size:14px;color:#aaa}:focus{outline:3px solid #1976d2;outline-offset:2px}.channel-list-container{max-height:300px;overflow-y:auto}.channel-list-container::-webkit-scrollbar{width:8px}.channel-list-container::-webkit-scrollbar-track{background:#444}.channel-list-container::-webkit-scrollbar-thumb{background:#666;border-radius:4px}@keyframes colorChange{0%{box-shadow:0 0 20px red}25%{box-shadow:0 0 20px #00f}50%{box-shadow:0 0 20px green}75%{box-shadow:0 0 20px #ff0}100%{box-shadow:0 0 20px red}}.video-player{animation:colorChange 60s infinite}.fullscreen-enabled{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999;background:#000;margin:0;padding:0}.fullscreen-enabled .video-container{height:100%;display:flex;flex-direction:column;justify-content:center}.fullscreen-enabled video{height:100%;width:100%;object-fit:contain}.loader{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border:5px solid #f3f3f3;border-top:5px solid #3498db;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite;z-index:10}@keyframes spin{0%{transform:translate(-50%,-50%) rotate(0)}100%{transform:translate(-50%,-50%) rotate(360deg)}}@media (max-width:768px){.container{padding:10px}#channel-list{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}}</style><div class=container><div class=video-container><div class=video-player><div id=embed-container style=display:none></div><video controls id=video-player></video><div class=status-overlay id=status-overlay>Status: Ready</div><div class=loader id=loader></div><div class=error-message id=error-message></div></div></div><div class=channel-list-container><ul id=channel-list></ul></div><div class=remote-hint><p>Remote Control: ▲/▼ Navigate | ENTER Select | ◄/► Volume | BACK Exit</div></div><script src=https://cdn.jsdelivr.net/npm/hls.js@latest></script><script>const channels=[{name:"Mbc3 144p",url:"https://shls-mbc3-prod-dub.shahid.net/out/v1/d5bbe570e1514d3d9a142657d33d85e6/index_8.m3u8"},{name:"MBC3 240p",url:"https://shls-mbc3-prod-dub.shahid.net/out/v1/d5bbe570e1514d3d9a142657d33d85e6/index_10.m3u8"},{name:"MBC3 360p",url:"https://shls-mbc3-prod-dub.shahid.net/out/v1/d5bbe570e1514d3d9a142657d33d85e6/index_5.m3u8"},{name:"Spacetoon 240p",url:"https://streams.spacetoon.com/live/stchannel/smil:livesmil.smil/chunklist_w810512056_b346000_slAR.m3u8"},{name:"Spacetoon 360p",url:"https://streams.spacetoon.com/live/stchannel/smil:livesmil.smil/chunklist_w810512056_b596000_slAR.m3u8"},{name:"Spacetoon 480p",url:"https://streams.spacetoon.com/live/stchannel/smil:livesmil.smil/chunklist_w810512056_b946000_slAR.m3u8"},{name:"Spacetoon auto",url:"https://streams.spacetoon.com/live/stchannel/smil:livesmil.smil/playlist.m3u8"},{name:"Cn AR auto",url:"https://watch.3rbcafee.com/2024/10/cnarabia.html",isWebpage:!0},{name:"قنوات اخرى",url:"https://www.3rbcafee.com/",isWebpage:!0}],channelList=document.getElementById("channel-list"),videoPlayer=document.getElementById("video-player"),container=document.querySelector(".container"),statusOverlay=document.getElementById("status-overlay"),errorMessage=document.getElementById("error-message"),loader=document.getElementById("loader");let currentChannelIndex=0,hls=null,isFullscreen=!1,retryTimeout=null,connectionMonitor=null,isOnline=!0;function init(){renderChannelList(),setupRemoteNavigation(),setupFullscreenHandler(),setupConnectionMonitor(),setTimeout(()=>{let e=document.querySelector("#channel-list li");e&&e.focus()},100)}function renderChannelList(){channelList.innerHTML="",channels.forEach((e,n)=>{let t=document.createElement("li");t.textContent=e.name,t.tabIndex=0,t.addEventListener("click",()=>selectChannel(n)),t.addEventListener("keydown",e=>{"Enter"===e.key&&selectChannel(n)}),channelList.appendChild(t)})}function selectChannel(e){currentChannelIndex=e;let n=channels[e];document.querySelectorAll("#channel-list li").forEach((n,t)=>{n.classList.toggle("active",t===e)}),n.isWebpage?window.open(n.url,"_blank"):playChannel(n.url)}function playChannel(e){clearTimeout(retryTimeout),hls&&(hls.destroy(),hls=null),errorMessage.style.display="none",errorMessage.textContent="",showLoader(),updateStatus("Loading stream..."),Hls.isSupported()?((hls=new Hls({maxMaxBufferLength:30,maxBufferSize:1e7,maxBufferLength:30,lowLatencyMode:!1})).loadSource(e),hls.attachMedia(videoPlayer),hls.on(Hls.Events.MANIFEST_PARSED,()=>{updateStatus("Stream loaded"),hideLoader(),videoPlayer.play().catch(n=>{showError("Playback error: "+n.message),scheduleRetry(e)})}),hls.on(Hls.Events.ERROR,(n,t)=>{if(t.fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:showError("Network error - attempting recovery..."),hls.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:showError("Media error - attempting recovery..."),hls.recoverMediaError();break;default:showError("Stream error - retrying..."),scheduleRetry(e)}else console.warn("Non-fatal HLS error:",t)}),hls.on(Hls.Events.FRAG_BUFFERED,()=>{updateStatus("Streaming")})):videoPlayer.canPlayType("application/vnd.apple.mpegurl")?(videoPlayer.src=e,videoPlayer.addEventListener("loadedmetadata",()=>{updateStatus("Stream loaded"),hideLoader(),videoPlayer.play().catch(n=>{showError("Playback error: "+n.message),scheduleRetry(e)})}),videoPlayer.addEventListener("error",()=>{showError("Native player error - retrying..."),scheduleRetry(e)})):(showError("Your browser does not support HLS streaming."),hideLoader()),setupPlaybackMonitor(e)}function scheduleRetry(e){hideLoader(),clearTimeout(retryTimeout);let n=5;updateStatus(`Will retry in ${n} seconds...`);let t=setInterval(()=>{--n<=0?(clearInterval(t),updateStatus("Retrying now..."),playChannel(e)):updateStatus(`Will retry in ${n} seconds...`)},1e3);retryTimeout=setTimeout(()=>{playChannel(e)},5e3)}function setupPlaybackMonitor(e){let n=videoPlayer.currentTime,t=0,l=setInterval(()=>{videoPlayer.paused||videoPlayer.ended||(videoPlayer.currentTime===n?++t>2&&(showError("Playback stalled - attempting recovery..."),hls?hls.startLoad():(videoPlayer.load(),videoPlayer.play().catch(n=>{scheduleRetry(e)})),t=0):t=0,n=videoPlayer.currentTime)},1e3);return videoPlayer.addEventListener("play",()=>{n=videoPlayer.currentTime,t=0}),()=>clearInterval(l)}function setupConnectionMonitor(){connectionMonitor=setInterval(()=>{let e=isOnline;if((isOnline=navigator.onLine)||!e){if(isOnline&&!e){updateStatus("Connection restored - recovering...");let n=channels[currentChannelIndex];n.isWebpage||playChannel(n.url)}}else showError("Internet connection lost"),hls&&hls.stopLoad()},3e3),window.addEventListener("online",()=>{isOnline=!0,updateStatus("Connection restored - recovering...");let e=channels[currentChannelIndex];e.isWebpage||playChannel(e.url)}),window.addEventListener("offline",()=>{isOnline=!1,showError("Internet connection lost"),hls&&hls.stopLoad()})}function showLoader(){loader.style.display="block"}function hideLoader(){loader.style.display="none"}function updateStatus(e){statusOverlay.textContent="Status: "+e,statusOverlay.style.color="#ffffff"}function showError(e){errorMessage.textContent=e,errorMessage.style.display="block",statusOverlay.textContent="Status: Error",statusOverlay.style.color="#ff4444"}function setupRemoteNavigation(){document.addEventListener("keydown",function(e){switch(document.querySelectorAll("#channel-list li"),e.key){case"ArrowUp":e.preventDefault(),navigateChannels(-1);break;case"ArrowDown":e.preventDefault(),navigateChannels(1);break;case"ArrowLeft":e.preventDefault(),adjustVolume(-.1);break;case"ArrowRight":e.preventDefault(),adjustVolume(.1);break;case"Enter":e.preventDefault(),selectChannel(currentChannelIndex);break;case"Backspace":case"Escape":isFullscreen&&(exitFullscreen(),e.preventDefault())}})}function navigateChannels(e){let n=document.querySelectorAll("#channel-list li");n[currentChannelIndex=(currentChannelIndex+e+channels.length)%channels.length].focus()}function adjustVolume(e){videoPlayer.volume=Math.min(1,Math.max(0,videoPlayer.volume+e)),updateStatus(`Volume: ${Math.round(100*videoPlayer.volume)}%`),setTimeout(()=>{videoPlayer.paused||updateStatus("Streaming")},2e3)}function setupFullscreenHandler(){videoPlayer.addEventListener("click",toggleFullscreen),document.addEventListener("fullscreenchange",handleFullscreenChange),document.addEventListener("webkitfullscreenchange",handleFullscreenChange),document.addEventListener("mozfullscreenchange",handleFullscreenChange),document.addEventListener("MSFullscreenChange",handleFullscreenChange)}function toggleFullscreen(){isFullscreen?exitFullscreen():container.requestFullscreen?container.requestFullscreen():container.webkitRequestFullscreen?container.webkitRequestFullscreen():container.mozRequestFullScreen?container.mozRequestFullScreen():container.msRequestFullscreen&&container.msRequestFullscreen()}function exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}function handleFullscreenChange(){(isFullscreen=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement))?container.classList.add("fullscreen-enabled"):container.classList.remove("fullscreen-enabled")}document.addEventListener("DOMContentLoaded",init);</script>
